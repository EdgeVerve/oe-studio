<link rel="import" href="ui-image-picker.html">
<link rel="import" href="ui-color-picker.html">

<dom-module is="ui-style-object-editor">
  <template>
        <style>
             :host {
                display: block;
                position: relative;
            }

            ev-input,
            ev-combo {
                --paper-input-container: {
                    background: #263238;
                    padding: 0px;
                    padding-top: 2px;
                    opacity: 0.87;
                    font-size: 12px;
                    border-radius: 2px;
                    color: #ffffff;
                }
                --paper-input-container-input: {
                    text-align: right;
                    font-size: 12px;
                    color: #fff;
                }
                --paper-input-container-underline: {
                    display: none;
                }
                --paper-input-container-underline-focus: {
                    display: none;
                }
                --paper-input-prefix: {
                    font-size: 12px;
                    color: #989A9C;
                    min-width: 55px;
                    text-align: left;
                    padding-left: 4px;
                }
                --paper-input-suffix: {
                    padding: 0px 4px;
                }
            }

            iron-icon {
                --iron-icon: {
                    width: 18px;
                    height: 18px;
                }
            }

            ev-combo {
                --paper-input-container-input: {
                    text-align: initial;
                    font-size: 12px;
                    color: #fff;
                }
            }

            paper-tooltip {
                --paper-tooltip: {
                    z-index: 200;
                }
            }

            ev-combo.number {
                --paper-input-container-input: {
                    text-align: right;
                    font-size: 12px;
                    color: #fff;
                }
            }

            .style-panel {
                margin-bottom: 8px;
            }

            .style-panel-header {
                padding: 10px 12px;
                font-size: 10px;
                font-family: "roboto-bold";
                background: rgba(255, 255, 255, 0.12);
                @apply(--layout);
            }

            .input-controls {
                padding: 0px 12px;
                @apply(--layout-horizontal);
                @apply(--layout-justified);
                @apply(--layout-center);
            }

            .style-panel-body .input-controls:not(:last-child) {
                margin-bottom: 12px;
            }

            .style-panel-body {
                padding: 24px 0px;
                box-sizing: border-box;
            }

            .input-controls .small-input {
                --paper-input-prefix: {
                    font-size: 12px;
                    color: #989A9C;
                    min-width: initial;
                    padding: 0px 4px;
                }
            }

            .input-controls .small-input:not(:last-child) {
                margin-right: 10px;
            }

            .help-icon {
                margin-left: 16px;
                min-width: 20px;
            }

            .seperator {
                border-top: 1px solid #292D2F;
                margin: 12px 0px;
            }

            .option-buttons {
                background: #263238;
                border-radius: 2px;
            }

            .style-label {
                font-family: Roboto-Regular;
                font-size: 12px;
                color: rgba(255, 255, 255, 0.54);
            }

            .option-buttons .icon-wrapper {
                padding: 4px;
                display: inline-block;
            }

            .option-buttons .icon-wrapper.iron-selected {
                border-bottom: 2px solid var(--accent-color);
                padding: 4px;
                padding-bottom: 2px;
            }

            .background-preview {
                width: 24px;
                height: 18px;
                margin-left: 8px;
                border-radius: 2px;
                cursor: pointer;
                box-sizing: border-box;
                border: 1px solid #ffffff;
            }

            .background-preview-prefix {
                @apply(--layout-horizontal);
            }

            .half-width {
                width: 50%;
            }
        </style>
        <div>
            <paper-dialog id="background-img-dialog" on-image-selected="_setBackgroundImage">
                <h2>Choose Background Image</h2>
                <paper-dialog-scrollable>
                    <ui-image-picker images={{assets.images}}></ui-image-picker>
                </paper-dialog-scrollable>
                <div class="buttons">
                    <paper-button dialog-dismiss>Close</paper-button>
                    <!--<paper-button dialog-confirm autofocus>Accept</paper-button>-->
                </div>
            </paper-dialog>
            <paper-dialog id="color-dialog" on-iron-overlay-closed="_colorPickerDialogClosed">
                <h2>Choose Color</h2>
                <paper-dialog-scrollable>
                    <ui-color-picker attribute-to-color="{{_attributeToColor}}" style-obj="{{styleObj}}"></ui-color-picker>
                </paper-dialog-scrollable>
                <div class="buttons">
                    <paper-button dialog-dismiss>Close</paper-button>
                    <!--<paper-button dialog-confirm autofocus>Accept</paper-button>-->
                </div>
            </paper-dialog>

            <div class="style-panel">
                <div class="style-panel-header" collapse-target="style-layout" on-tap="_handleCollapse">
                    LAYOUT
                </div>
                <iron-collapse id="style-layout">
                    <div class="style-panel-body">
                        <div class="input-controls">
                            <ev-input no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.margin}}">
                                <div prefix>Margin</div>
                                <div suffix>&nbsp;</div>
                            </ev-input>
                            <div>
                                <iron-icon class="help-icon" icon="icons:help"></iron-icon>
                                <paper-tooltip> Margin </paper-tooltip>
                            </div>
                        </div>
                        <div class="input-controls">
                            <ev-input no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.padding}}">
                                <div prefix>Padding</div>
                                <div suffix>&nbsp;</div>
                            </ev-input>
                            <div>
                                <iron-icon class="help-icon" icon="icons:help"></iron-icon>
                                <paper-tooltip> Padding </paper-tooltip>
                            </div>
                        </div>
                        <div class="input-controls">
                            <ev-input no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.boxShadow}}">
                                <div prefix>Box Shadow</div>
                                <div suffix>&nbsp;</div>
                            </ev-input>
                            <div>
                                <iron-icon class="help-icon" icon="icons:help"></iron-icon>
                                <paper-tooltip> Box Shadow </paper-tooltip>
                            </div>
                        </div>
                        <div class="seperator"></div>
                        <div class="input-controls">
                            <div>
                                <ev-input class="small-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.width}}">
                                    <div prefix>
                                        <iron-icon icon="ev-designer-icons:style-width"></iron-icon>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-input>
                                <paper-tooltip> Width </paper-tooltip>
                            </div>
                            <div>
                                <ev-input class="small-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.minWidth}}">
                                    <div prefix>
                                        <span> Min </span>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-input>
                                <paper-tooltip> Min Width </paper-tooltip>
                            </div>
                            <div>
                                <ev-input class="small-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.maxWidth}}">
                                    <div prefix>
                                        <span> Max </span>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-input>
                                <paper-tooltip> Max Width </paper-tooltip>
                            </div>
                        </div>

                        <div class="input-controls">
                            <div>
                                <ev-input class="small-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.height}}">
                                    <div prefix>
                                        <iron-icon icon="ev-designer-icons:style-height"></iron-icon>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-input>
                                <paper-tooltip> Height </paper-tooltip>
                            </div>
                            <div>
                                <ev-input class="small-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.minHeight}}">
                                    <div prefix>
                                        <span> Min </span>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-input>
                                <paper-tooltip> Min Height </paper-tooltip>
                            </div>
                            <div>
                                <ev-input class="small-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.maxHeight}}">
                                    <div prefix>
                                        <span> Max </span>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-input>
                                <paper-tooltip> Max Height </paper-tooltip>
                            </div>
                        </div>
                        <div class="seperator"></div>

                        <div class="input-controls">
                            <span class="style-label"> Overflow : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="overflow-value" selected="{{styleObj.overflow}}" on-iron-select="_changeInStyle">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" overflow-value="initial">
                                        <iron-icon icon="icons:close"></iron-icon>
                                        <paper-tooltip> None </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" overflow-value="visible">
                                        <iron-icon icon="icons:visibility"></iron-icon>
                                        <paper-tooltip> Visible </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" overflow-value="hidden">
                                        <iron-icon icon="icons:visibility-off"></iron-icon>
                                        <paper-tooltip> Hidden </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" overflow-value="scroll">
                                        <iron-icon icon="ev-designer-icons:style-overflow-scroll"></iron-icon>
                                        <paper-tooltip> Scroll </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" overflow-value="auto">
                                        <iron-icon icon="ev-designer-icons:style-overflow-auto"></iron-icon>
                                        <paper-tooltip> Auto </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>

                        <div class="input-controls">
                            <span class="style-label"> Position : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="position-value" selected="{{styleObj.position}}" on-iron-select="_changeInStyle">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="initial">
                                        <iron-icon icon="icons:close"></iron-icon>
                                        <paper-tooltip> None </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="absolute">
                                        <iron-icon icon="ev-designer-icons:style-position-absolute"></iron-icon>
                                        <paper-tooltip> Absolute </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="realtive">
                                        <iron-icon icon="ev-designer-icons:style-position-relative"></iron-icon>
                                        <paper-tooltip> Relative </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="static">
                                        <iron-icon icon="ev-designer-icons:style-position-static" position-value="static"></iron-icon>
                                        <paper-tooltip> Static </paper-tooltip>
                                    </div> 
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="fixed">
                                        <iron-icon icon="ev-designer-icons:style-position-fixed" position-value="fixed"></iron-icon>
                                        <paper-tooltip> Fixed </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="input-controls">
                            <span class="style-label"> Display : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="position-value" selected="{{styleObj.display}}" on-iron-select="_changeInStyle">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="none">
                                        <iron-icon icon="icons:close"></iron-icon>
                                        <paper-tooltip> None </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="inline">
                                        <iron-icon icon="ev-designer-icons:style-position-absolute"></iron-icon>
                                        <paper-tooltip> inline </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="block">
                                        <iron-icon icon="ev-designer-icons:style-position-relative"></iron-icon>
                                        <paper-tooltip> block </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="inline-block">
                                        <iron-icon icon="ev-designer-icons:style-position-static" position-value="inline-block"></iron-icon>
                                        <paper-tooltip> inline-block </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="input-controls">
                            <span class="style-label"> Box Sizing : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="position-value" selected="{{styleObj.boxSizing}}" on-iron-select="_changeInStyle">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="border-box">
                                        <iron-icon icon="ev-designer-icons:style-overflow-scroll"></iron-icon>
                                        <paper-tooltip> border-box </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="content-box">
                                        <iron-icon icon="ev-designer-icons:style-position-absolute"></iron-icon>
                                        <paper-tooltip> content-box </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="initial">
                                        <iron-icon icon="ev-designer-icons:style-position-relative"></iron-icon>
                                        <paper-tooltip> initial </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" position-value="inherit">
                                        <iron-icon icon="ev-designer-icons:style-position-static" position-value="inherit"></iron-icon>
                                        <paper-tooltip> inherit </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>
                    </div>
                </iron-collapse>
            </div>
            <div class="style-panel">
                <div class="style-panel-header" collapse-target="style-typography" on-tap="_handleCollapse">
                    TYPOGRAPHY
                </div>
                <iron-collapse id="style-typography">
                    <div class="style-panel-body">
                        <div class="input-controls">
                            <div>
                                <ev-combo no-label-float allow-free-text placeholder="Font Family" on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.fontFamily}}" listdata={{fontList}}>
                                    <div prefix>
                                        <iron-icon icon="ev-designer-icons:style-tg-font-family"></iron-icon>
                                    </div>
                                </ev-combo>
                                <paper-tooltip> Font Family </paper-tooltip>
                            </div>
                        </div>
                        <div class="input-controls">
                            <div>
                                <ev-input class="small-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.fontSize}}">
                                    <div prefix>
                                        <iron-icon icon="ev-designer-icons:style-tg-font-size"></iron-icon>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-input>
                                <paper-tooltip> Font Size </paper-tooltip>
                            </div>
                            <div>
                                <ev-combo class="small-input number" placeholder="Font Weight" no-label-float allow-free-text on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.fontWeight}}"
                                    listdata="{{fontWeightList}}">
                                    <div prefix>
                                        <iron-icon icon="ev-designer-icons:style-tg-font-weight"></iron-icon>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-combo>
                                <paper-tooltip> Font Weight </paper-tooltip>
                            </div>
                        </div>
                        <div class="input-controls">
                            <div>
                                <ev-input class="small-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.letterSpacing}}">
                                    <div prefix>
                                        <iron-icon icon="ev-designer-icons:style-tg-letter-spacing"></iron-icon>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-input>
                                <paper-tooltip> Letter Spacing </paper-tooltip>
                            </div>
                            <div>
                                <ev-input class="small-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.lineHeight}}">
                                    <div prefix>
                                        <iron-icon icon="ev-designer-icons:style-tg-line-height"></iron-icon>
                                    </div>
                                    <div suffix>&nbsp;</div>
                                </ev-input>
                                <paper-tooltip> Line Height </paper-tooltip>
                            </div>
                        </div>
                        <div class="input-controls">
                            <span class="style-label"> Align : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="text-align-value" selected="{{styleObj.textAlign}}" on-iron-select="_changeInStyle">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-align-value="">
                                        <iron-icon icon="icons:close"></iron-icon>
                                        <paper-tooltip> None </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-align-value="left">
                                        <iron-icon icon="editor:format-align-left"></iron-icon>
                                        <paper-tooltip> Left </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-align-value="center">
                                        <iron-icon icon="editor:format-align-center"></iron-icon>
                                        <paper-tooltip> Center </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-align-value="right">
                                        <iron-icon icon="editor:format-align-right"></iron-icon>
                                        <paper-tooltip> Right </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-align-value="justify">
                                        <iron-icon icon="editor:format-align-justify"></iron-icon>
                                        <paper-tooltip> Justify </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>

                        <div class="seperator"></div>

                        <div class="input-controls">
                            <ev-input class="background-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.color}}">
                                <div prefix class="background-preview-prefix">
                                    <iron-icon icon="editor:format-color-text"></iron-icon>
                                    <div class="background-preview" style$="background:{{styleObj.color}}" attribute-to-color="color" on-tap="_openColorPicker"></div>
                                </div>
                                <div suffix>
                                    <iron-icon icon="icons:delete" attribute-to-clear="color" on-tap="_clearstyleObj"> </iron-icon>
                                </div>
                            </ev-input>
                        </div>

                        <div class="seperator"></div>

                        <div class="input-controls">
                            <span class="style-label"> Decoration : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="text-decoration-value" selected="{{styleObj.textDecoration}}" on-iron-select="_changeInStyle">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-decoration-value="none">
                                        <iron-icon icon="close"></iron-icon>
                                        <paper-tooltip> None </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-decoration-value="underline">
                                        <iron-icon icon="editor:format-underlined"></iron-icon>
                                        <paper-tooltip> Underline </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-decoration-value="line-through">
                                        <iron-icon icon="editor:strikethrough-s"></iron-icon>
                                        <paper-tooltip> Line Through </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>

                        <div class="input-controls">
                            <span class="style-label"> Transform : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="text-transform-value" selected="{{styleObj.textTransform}}" on-iron-select="_changeInStyle">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-transform-value="">
                                        <iron-icon icon="close"></iron-icon>
                                        <paper-tooltip> None </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-transform-value="capitalize">
                                        <iron-icon icon="ev-designer-icons:style-tg-trans-capitalize"></iron-icon>
                                        <paper-tooltip> Capitalize </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-transform-value="uppercase">
                                        <iron-icon icon="ev-designer-icons:style-tg-trans-upper"></iron-icon>
                                        <paper-tooltip> Uppercase </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" text-transform-value="lowercase">
                                        <iron-icon icon="ev-designer-icons:style-tg-trans-lower"></iron-icon>
                                        <paper-tooltip> Lowercase </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>

                    </div>
                </iron-collapse>
            </div>
            <div class="style-panel">
                <div class="style-panel-header" collapse-target="style-background" on-tap="_handleCollapse">
                    BACKGROUND
                </div>
                <iron-collapse id="style-background">
                    <div class="style-panel-body">
                        <div class="input-controls">
                            <ev-input class="background-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.background}}">
                                <div prefix class="background-preview-prefix">
                                    <iron-icon icon="editor:format-color-fill"></iron-icon>
                                    <div class="background-preview" style$="background:{{styleObj.background}}" attribute-to-color="background" on-tap="_openColorPicker"></div>
                                </div>
                                <div suffix>
                                    <iron-icon icon="delete" attribute-to-clear="background" on-tap="_clearstyleObj"></iron-icon>
                                </div>
                            </ev-input>
                        </div>
                        <div class="input-controls">
                            <ev-input class="background-input" no-label-float on-blur="_changeInStyle" on-input="_changeStyleInstant" value="{{styleObj.backgroundImage}}">
                                <div prefix class="background-preview-prefix">
                                    <iron-icon icon="image:image"></iron-icon>
                                    <iron-image class="background-preview" src="[[_getSrc(styleObj.backgroundImage)]]" sizing="contain" on-tap="_openBackgroundPickerDialog"></iron-image>
                                </div>
                                <div suffix>
                                    <iron-icon icon="delete" attribute-to-clear="backgroundImage" on-tap="_clearstyleObj"></iron-icon>
                                </div>
                            </ev-input>
                        </div>
                    </div>
                </iron-collapse>
            </div>
            <div class="style-panel">
                <div class="style-panel-header" collapse-target="style-border" on-tap="_handleCollapse">
                    BORDER
                </div>
                <iron-collapse id="style-border">
                    <div class="style-panel-body">
                        <div class="input-controls">
                            <span class="style-label"> Style : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="border-style-value" selected="{{_activeBorderObj.style}}" on-iron-select="_borderChanged"
                                    on-iron-deselect="_borderChanged">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-style-value="none">
                                        <iron-icon icon="close"></iron-icon>
                                        <paper-tooltip> None </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-style-value="solid">
                                        <iron-icon icon="ev-designer-icons:style-border-style-solid"></iron-icon>
                                        <paper-tooltip> Solid </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-style-value="dashed">
                                        <iron-icon icon="ev-designer-icons:style-border-style-dashed"></iron-icon>
                                        <paper-tooltip> Dashed </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-style-value="dotted">
                                        <iron-icon icon="ev-designer-icons:style-border-style-dotted"></iron-icon>
                                        <paper-tooltip> Dotted </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="input-controls">
                            <ev-input class="small-input" no-label-float value="{{_activeBorderObj.width}}" on-change="_borderChanged">
                                <div prefix>
                                    <iron-icon icon="icons:line-weight"></iron-icon>
                                </div>
                                <div suffix>&nbsp;</div>
                            </ev-input>
                            <ev-input no-label-float value="{{_activeBorderObj.color}}" on-change="_borderChanged">
                                <div prefix class="background-preview-prefix">
                                    <iron-icon icon="editor:format-color-fill"></iron-icon>
                                    <div class="background-preview" style$="border-color:{{_activeBorderObj.color}};border-width:9px;" attribute-to-color$="{{_getActiveBorder(_activeBorder,'Color')}}"
                                        on-tap="_openColorPicker"></div>
                                </div>
                                <div suffix>
                                    <iron-icon icon="delete" attribute-to-clear$="{{_getActiveBorder(_activeBorder,'Color')}}" on-tap="_clearstyleObj"></iron-icon>
                                </div>
                            </ev-input>
                        </div>
                        <div class="input-controls">
                            <span class="style-label"> Sides : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="border-side" attribute-to-change="Width" selected="{{_activeBorder}}" on-iron-select="_borderSelectionChanged"
                                    on-iron-deselect="_borderSelectionChanged">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="border">
                                        <iron-icon icon="editor:border-all"></iron-icon>
                                        <paper-tooltip> All </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="borderTop">
                                        <iron-icon icon="editor:border-top"></iron-icon>
                                        <paper-tooltip> Top </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="borderRight">
                                        <iron-icon icon="editor:border-right"></iron-icon>
                                        <paper-tooltip> Right </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="borderBottom">
                                        <iron-icon icon="editor:border-bottom"></iron-icon>
                                        <paper-tooltip> Bottom </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="borderLeft">
                                        <iron-icon icon="editor:border-left"></iron-icon>
                                        <paper-tooltip> Left </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>
                        <div class="seperator"></div>
                        <div class="input-controls">
                            <span class="style-label"> Radius : </span>
                            <ev-input class="small-input half-width" no-label-float value="{{_activeBorderObj.radius}}" on-change="_borderChanged">
                                <div prefix>
                                    <iron-icon icon="ev-designer-icons:style-radius"></iron-icon>
                                    <paper-tooltip> Border Radius </paper-tooltip>
                                </div>
                                <div suffix>&nbsp;</div>
                            </ev-input>
                        </div>
                        <div class="input-controls">
                            <span class="style-label"> Sides : </span>
                            <div class="option-buttons">
                                <iron-selector attr-for-selected="border-side" attribute-to-change="Radius" on-iron-select="_borderSelectionChanged" on-iron-deselect="_borderSelectionChanged"
                                    selected="{{_activeRadiusSide}}">
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="border">
                                        <iron-icon icon="ev-designer-icons:style-radius-all"></iron-icon>
                                        <paper-tooltip> All </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="borderTopLeft">
                                        <iron-icon icon="ev-designer-icons:style-radius-top-left"></iron-icon>
                                        <paper-tooltip> Top Left </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="borderTopRight">
                                        <iron-icon icon="ev-designer-icons:style-radius-top-right"></iron-icon>
                                        <paper-tooltip> Top Right </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="borderBottomLeft">
                                        <iron-icon icon="ev-designer-icons:style-radius-bottom-left"></iron-icon>
                                        <paper-tooltip> Bottom Left </paper-tooltip>
                                    </div>
                                    <div class="icon-wrapper" on-tap="_changeStyleInstant" border-side="borderBottomRight">
                                        <iron-icon icon="ev-designer-icons:style-radius-bottom-right"></iron-icon>
                                        <paper-tooltip> Bottom Right </paper-tooltip>
                                    </div>
                                </iron-selector>
                            </div>
                        </div>
                    </div>
                </iron-collapse>
            </div>
        </div>
    </template>
  <script>
    Polymer({
      is: 'ui-style-object-editor',
      properties: {
        styleObj: {
          type: Object,
          notify: true,
          observer: '_styleObjChanged',
          value: function() {
            return {};
          }
        },
        assets: {
          type: Object
        },
        _activeBorder: {
          type: String
        },
        _activeRadiusSide: {
          type: String
        },
        _activeBorderObj: {
          type: Object
        }
      },
      observers: [
        '_styleChanged(styleObj.*)'
      ],
      get uiDomManager() {
        return document.querySelector('ui-dom-manager');
      },
      _styleChanged: function() {
        this.debounce('style-changed', function() {
          this.async(function() {
            this.uiDomManager.styleChangeHandler();
          }, 250);
        }, 300);
      },
      _handleCollapse: function(event) {
        event.stopPropagation();
        var element = event.currentTarget;
        var id = element.getAttribute('collapse-target');
        this._toggleCollapse(id);
      },
      _toggleCollapse: function(id) {
        var elementToToggle = this.$[id];
        var collapseComponents = [
          'style-layout', 'style-typography', 'style-background', 'style-border'
        ];
        var opened = elementToToggle.opened;
        collapseComponents.forEach(function(collapseComponent) {
          this.$[collapseComponent].hide();
        }.bind(this));
        if (elementToToggle) {
          elementToToggle.set('opened', !opened);
        }
      },
      _styleObjChanged: function() {
        //this._toggleCollapse('style-layout');
        this.$['style-layout'].show();
        this.async(function() {
          this.set('_activeBorder', 'border');
          this.set('_activeRadiusSide', 'border');
          this._borderSelectionChanged();
        }, 100);
      },
      _borderChanged: function(event) {
        var border = this._activeBorderObj;
        if (border) {
          var borderStyle = border.width + ' ' + border.style + ' ' + border.color;
          this.set('styleObj.' + this._activeBorder, borderStyle);
          this.set('styleObj.' + this._activeRadiusSide + 'Radius', border.radius);
        }
        this._changeInStyle(event);
        this._changeStyleInstant(event);
      },
      _borderSelectionChanged: function(event) {
        var style = this.styleObj;
        if (this._activeBorder && style) {
          var borderObj = {
            width: style[this._activeBorder + 'Width'],
            style: style[this._activeBorder + 'Style'],
            color: style[this._activeBorder + 'Color']
          }
          borderObj.radius = style[this._activeRadiusSide + 'Radius'];
          this.set('_activeBorderObj', borderObj);
        }
        this._changeInStyle(event);
        this._changeStyleInstant(event);
      },
      _colorChanged: function(event) {
        var color = event.detail;
        this.set('_activeBorderObj.color', color);
      },

      _getSrc: function(selectedImage) {
        if (!selectedImage) {
          return '';
        }
        var path = selectedImage.slice(selectedImage.indexOf('"') + 1)
        path = path.slice(0, path.indexOf('"'));
        return path;
      },
      _getActiveBorder: function(activeBorder, property) {
        return activeBorder + property;
      },
      _setBackgroundImage: function(event) {
        var imgUrl = event.detail;
        this.$['background-img-dialog'].close();
        this.set('styleObj.backgroundImage', 'url("' + imgUrl + '")');
      },
      _openBackgroundPickerDialog: function() {
        this.$['background-img-dialog'].open();
      },
      _openColorPicker: function(event) {
        var element = event.currentTarget;
        var attribute = element.getAttribute('attribute-to-color');
        this.set('_attributeToColor', attribute);
        if (attribute.indexOf('border') > -1) {
          this.addEventListener('color-changed', this._colorChanged);
        }
        this.$['color-dialog'].open();
      },
      _colorPickerDialogClosed: function(event) {
        this.removeEventListener('color-changed', this._colorChanged);
        this._changeStyleInstant(event);
        this._changeInStyle(event);
      },
      _clearstyle: function(event) {
        var element = event.currentTarget;
        var attribute = element.getAttribute('attribute-to-clear');
        this.set('styleObj.' + attribute, '');
      },
      _changeInStyle: function() {
        this.async(function() {
          this.fire('change-in-style', this.styleObj);
        }, 150);
      },
      _changeStyleInstant: function() {
        this.async(function() {
          this.fire('change-style-instant', this.styleObj);
        }, 100);
      }
    });

  </script>

</dom-module>
